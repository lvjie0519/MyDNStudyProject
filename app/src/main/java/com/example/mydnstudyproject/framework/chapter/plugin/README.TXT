插件化

插件化：动态加载技术

动态加载技术：应用程序运行时，动态加载程序中原本不存在的可执行文件并允许这些文件里的代码逻辑。

插件化作用：主要用来解决应用越来越大以及模块的解耦。
    1、65536的限制；

实现方案：
    1、插桩式；
    2、Hook技术；
    3、反射；

Android 9.0开始， 系统有限制反射， 所以反射的方式基本已经被淘汰，现在大部分都采用前两种方案。

1、插桩式
    1.1 利用DexClassLoader 来加载 插件 apk 里面的 dex 文件
    1.2 通过反射来new 一个 Resources类，该类用来加载 插件 apk 里面的资源
    1.3 宿主实现了一个ProxyActivity 代理类， 每次启动插件里面的activity，实际是启动ProxyActivity，
        然后通过反射new一个插件的activity，把ProxyActivity 传递给插件的activity，插件activity执行生命周期的过程
        其实就是ProxyActivity执行生命周期的过程；

    1.4 DexClassLoader 与 PathClassLoader区别？
        DexClassLoader 可以加载 已安装的、sdk卡的 dex文件
        PathClassLoader 只能加载已安装的 dex文件

2、Hook技术
    钩子函数实际上也是以恶搞处理消息的程序段，通过系统调用，把它挂入系统，在系统没有调用该函数之前，钩子程序就先捕获该消息，
    这样钩子函数先得到控制全。
    1）需要找到hook点；（通常都是静态方法返）
    2）将hook方法放到系统之外执行;

    通俗的说，通过反射获取系统的对象，然后再通过反射修改系统对象的数据，也可以通过动态代理替换系统里面的对象，当系统调用到替换的对象是，对
    部分方法进行一个拦截处理；